#!/usr/bin/env bash

# Build the ultimate_turbo_modal JavaScript package
echo "Building ultimate_turbo_modal JavaScript package..."
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
DEMO_APP_DIR="$SCRIPT_DIR/.."
(cd "$DEMO_APP_DIR/../javascript" && yarn build)

# Reinstall to pick up the latest changes
echo "Installing latest ultimate_turbo_modal in demo app..."
yarn install --force

# Start the development servers
if command -v overmind &> /dev/null; then
  overmind start -f $DEMO_APP_DIR/Procfile.dev "$@"
else
  foreman start -f $DEMO_APP_DIR/Procfile.dev "$@"
fi
